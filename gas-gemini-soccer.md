---
title: GAS+Geminiで代表チーム情報の自動出力
layout: default
---

# GAS+Geminiで代表チーム情報の自動出力

**期間**：2025年　**形態**：個人

## 背景/課題
Googleフォームで国名を受け取り、代表チームの主要情報（FIFAランキング、注目選手、特徴など）を自動で生成・整形してGoogleシートへ保存したい。一方で、ランキング情報の更新遅延や国名の揺れ（例：略称／別名）により、**誤応答・羅列出力**が発生する課題があった。

## 目標KPI（暫定）
- 入力から出力までの平均処理時間：**XX秒以下**
- ランキング欠損時の**適切なフォールバック率 100%**（ミスリードのないメッセージ）
- 入力の正規化カバー率：**主要言語表記の90%+**

## アーキテクチャ（概要）
```
Forms → (GAS Trigger) → Apps Script
  ├─ 入力正規化（同義語辞書/前処理）
  ├─ Gemini呼び出し（プロンプトにガードレール）
  ├─ ランキング取得（更新不可時はフォールバック文）
  ├─ 整形（表/要約/メタ情報）
  └─ Sheets保存 + ログ/通知
```

## アプローチ
1. **入力正規化**：国名の別名/略称を辞書化し、一意のキーへ正規化。2. **プロンプト設計**：羅列出力や無関係情報を抑止する指示と、欠損時の**明確なフォールバック文**を定義。3. **例外処理**：API失敗時のリトライ、タイムアウト、ユーザー向けの失敗メッセージを統一。4. **ログ設計**：入力・レスポンス要約・ステータス・処理時間をシートへ保存し、将来の品質監視を可能に。

## 工夫点
- **最新性に依存しない体験**：ランキングが未更新でも「未発表である旨＋代替情報」を提示。- **冗長な羅列の抑止**：プロンプトのガードレールとポストプロセスで不必要な国一覧を除去。- **運用耐性**：レート制限・再試行・通知（必要時）を実装。- **入力の曖昧性対策**：国名シノニム辞書＋簡易バリデーション。

## 成果（埋め込み用）
- 手作業の情報収集・整形を**0分**へ短縮（従来：XX分/件）。- 平均処理時間 **XX秒**、想定エラーのカバー率 **YY%**。- ユーザー操作はフォーム送信のみ（**1アクション**）。

## 技術スタック
- **Apps Script（JavaScript）**, Google Forms, Google Sheets- 外部AI API（Gemini）- ログ/通知（必要に応じて）

## リポジトリ/デモ（後で記入）
- GitHub：`https://github.com/（ユーザー名）/soccer-info-gas`- デモ動画/スクリーンショット：`assets/images/` に配置予定

## 次の展開
- 公式ランキングの自動検知と差分更新- BigQuery等へのログ集約／簡易ダッシュボード- 単体テストの導入・プロンプト回帰テスト
